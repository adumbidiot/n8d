!function(t){function e(e){for(var s,o,n=e[0],r=e[1],a=0,c=[];a<n.length;a++)o=n[a],i[o]&&c.push(i[o][0]),i[o]=0;for(s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s]);for(l&&l(e);c.length;)c.shift()()}var s={},i={0:0};var o={};var n={3:function(){return{"./polaris_web":{__wbindgen_object_drop_ref:function(t){return s[2].exports.__wbindgen_object_drop_ref(t)},__wbindgen_json_parse:function(t,e){return s[2].exports.__wbindgen_json_parse(t,e)},__wbindgen_number_get:function(t,e){return s[2].exports.__wbindgen_number_get(t,e)},__wbindgen_throw:function(t,e){return s[2].exports.__wbindgen_throw(t,e)}}}}};function r(e){if(s[e])return s[e].exports;var i=s[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.e=function(t){var e=[],s=i[t];if(0!==s)if(s)e.push(s[2]);else{var a=new Promise(function(e,o){s=i[t]=[e,o]});e.push(s[2]=a);var c,h=document.createElement("script");h.charset="utf-8",h.timeout=120,r.nc&&h.setAttribute("nonce",r.nc),h.src=function(t){return r.p+""+t+".bundle.js"}(t),c=function(e){h.onerror=h.onload=null,clearTimeout(l);var s=i[t];if(0!==s){if(s){var o=e&&("load"===e.type?"missing":e.type),n=e&&e.target&&e.target.src,r=new Error("Loading chunk "+t+" failed.\n("+o+": "+n+")");r.type=o,r.request=n,s[1](r)}i[t]=void 0}};var l=setTimeout(function(){c({type:"timeout",target:h})},12e4);h.onerror=h.onload=c,document.head.appendChild(h)}return({1:[3]}[t]||[]).forEach(function(t){var s=o[t];if(s)e.push(s);else{var i,a=n[t](),c=fetch(r.p+""+{3:"0e14d068d4d0e35ba10c"}[t]+".module.wasm");if(a instanceof Promise&&"function"==typeof WebAssembly.compileStreaming)i=Promise.all([WebAssembly.compileStreaming(c),a]).then(function(t){return WebAssembly.instantiate(t[0],t[1])});else if("function"==typeof WebAssembly.instantiateStreaming)i=WebAssembly.instantiateStreaming(c,a);else{i=c.then(function(t){return t.arrayBuffer()}).then(function(t){return WebAssembly.instantiate(t,a)})}e.push(o[t]=i.then(function(e){return r.w[t]=(e.instance||e).exports}))}}),Promise.all(e)},r.m=t,r.c=s,r.d=function(t,e,s){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(s,i,function(e){return t[e]}.bind(null,i));return s},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r.oe=function(t){throw console.error(t),t},r.w={};var a=window.webpackJsonp=window.webpackJsonp||[],c=a.push.bind(a);a.push=e,a=a.slice();for(var h=0;h<a.length;h++)e(a[h]);var l=c;r(r.s=0)}([function(t,e,s){const i=s(1);let o=document.getElementById("canvas"),n=document.getElementById("obstacle-radius-checkbox"),r=document.getElementById("waypoint-radius-checkbox"),a=document.getElementById("points"),c=50,h=300,l=new i(o.getContext("2d"));l.opts.point.radius=c,l.opts.waypoint.radius=c,l.opts.obstacle.radius=c,console.log(l);let p={compileTime:0,pathLength:0,radius:c,limit:h};function d(t,e,s){s=s||{};let i=l.drawPath(t,e);l.drawStat("Render Time: "+i+"ms"),l.drawStat("Compile Time: "+p.compileTime+"ms"),l.drawStat("# of Points: "+p.pathLength),l.drawStat("Radius: "+c),l.drawStat("Limit: "+h)}function u(t,e){let s=performance.now(),i=t.compile(),o=performance.now();p.compileTime=o-s,p.pathLength=i.length,d(i,e),a.innerHTML="";for(var n=0;n!=i.length;n++)a.innerHTML+="<div>Point "+(n+1)+": ("+i[n].x+", "+i[n].y+")</div>";return i}s.e(1).then(s.bind(null,2)).then(t=>{let e=new t.Point(25,50),s=new t.Point(600,400),i=[new t.Point(450,300),new t.Point(400,350),new t.Point(281,205),new t.Point(300,350)],a=new t.Map(e,s,c);a.setLimit(h);for(var p=0;p!=i.length;p++)a.addObstacle(i[p]);let f=u(a,i);n.onclick=function(t){l.opts.obstacle.radius=t.target.checked?l.opts.point.radius:0,d(f,i)},r.onclick=function(t){l.opts.waypoint.radius=t.target.checked?l.opts.point.radius:0,d(f,i)},window.addEventListener("click",function(e){if(e.target==o){var s=o.getBoundingClientRect(),n=e.clientX-s.left,r=o.height-(e.clientY-s.top);let c=new t.Point(1*n/l.scale-l.offset.x,1*r/l.scale-l.offset.y);i.push(c),a.addObstacle(c),f=u(a,i)}});let y={up:!1,down:!1,left:!1,right:!1},w=!1,x={dx:1,dy:1};function b(){if(y.right||y.left){x.dx=Math.min(.5+x.dx,10);let t=y.right?-1:1;l.offset.x+=x.dx*t}else x.dx=0;if(y.down||y.up){x.dy=Math.min(.5+x.dy,10);let t=y.up?-1:1;l.offset.y+=x.dy*t}else x.dy=0;d(f,i),(w=y.right||y.left||y.up||y.down)&&requestAnimationFrame(b)}window.addEventListener("keydown",function(t){y.right=39==t.keyCode||68==t.keyCode||y.right,y.left=37==t.keyCode||65==t.keyCode||y.left,y.down=40==t.keyCode||83==t.keyCode||y.down,y.up=38==t.keyCode||87==t.keyCode||y.up,!w&&(y.right||y.left||y.up||y.down)&&(w=!0,b())}),window.addEventListener("keyup",function(t){!y.right||39!=t.keyCode&&68!=t.keyCode||(y.right=!1),!y.left||37!=t.keyCode&&65!=t.keyCode||(y.left=!1),!y.down||40!=t.keyCode&&83!=t.keyCode||(y.down=!1),!y.up||38!=t.keyCode&&87!=t.keyCode||(y.up=!1)}),o.addEventListener("wheel",function(t){return 0!=t.deltaY&&(t.deltaY<0?l.scale*=2:l.scale*=.5,d(f,i)),t.preventDefault(),!1},!1)})},function(t,e,s){t.exports=class{constructor(t,e){this.ctx=t,this.opts=e||{},this.opts.clear=this.opts.clear||{},this.opts.clear.color=this.opts.clear.color||"black",this.opts.image=this.opts.image||null,this.opts.point=this.opts.point||{},this.opts.point.size=this.opts.point.size||10,this.opts.point.radius=this.opts.point.radius||0,this.opts.stats=this.opts.stats||{},this.opts.stats.color=this.opts.stats.color||"white",this.opts.stats.x=this.opts.stats.x||5,this.opts.stats.y=this.opts.stats.y||10,this.opts.stats.dx=this.opts.stats.dx||0,this.opts.stats.dy=this.opts.stats.dy||10,this.opts.obstacle=this.opts.obstacle||{},this.opts.obstacle.color=this.opts.obstacle.color||"orange",this.opts.obstacle.radius=this.opts.obstacle.radius||this.opts.point.radius||0,this.opts.waypoint=this.opts.waypoint||{},this.opts.waypoint.color=this.opts.waypoint.color||"white",this.opts.waypoint.radius=this.opts.waypoint.radius||this.opts.point.radius||0,this.stats={x:this.opts.stats.x,y:this.opts.stats.y},this.offset={x:0,y:0},this.scale=1}clear(){let t=this.ctx.canvas.width,e=this.ctx.canvas.height;this.ctx.clearRect(0,0,t,e),this.ctx.fillStyle=this.opts.clear.color,this.ctx.fillRect(0,0,t,e),this.stats.x=this.opts.stats.x,this.stats.y=this.opts.stats.y}drawPoint({x:t,y:e},s){let i=(s=s||this.opts.point.size)/2,o=t-i,n=this.ctx.canvas.height-(e+i);this.ctx.fillRect(o,n,s,s)}drawText({x:t,y:e},s){this.ctx.fillText(s,t,e)}drawWayPoint({x:t,y:e},s){if(this.drawPoint({x:t,y:e}),s){let i=this.opts.point.size,o=i/2,n=this.ctx.canvas.height-(e+o)+2*i;this.drawText({x:t,y:n},s)}}drawRadius({x:t,y:e},s){this.ctx.beginPath(),s=s||this.opts.point.radius,this.ctx.arc(t,this.ctx.canvas.height-e,s,s,2*Math.PI,!0),this.ctx.closePath(),this.ctx.stroke()}drawPath(t,e){let s=performance.now();this.clear(),this.ctx.fillStyle=this.opts.waypoint.color,this.opts.waypoint.radius>0&&(this.ctx.strokeStyle=this.opts.waypoint.color);for(var i=0;i!=t.length;i++){let e={x:(t[i].x+this.offset.x)*this.scale,y:(t[i].y+this.offset.y)*this.scale};this.drawWayPoint(e,i+1),this.opts.waypoint.radius>0&&this.drawRadius(e,this.opts.point.radius*this.scale)}this.ctx.fillStyle=this.opts.obstacle.color,this.opts.obstacle.radius>0&&(this.ctx.strokeStyle=this.opts.obstacle.color);for(i=0;i!=e.length;i++){let t={x:(e[i].x()+this.offset.x)*this.scale,y:(e[i].y()+this.offset.y)*this.scale},s=this.opts.obstacle.size;this.drawPoint(t,s),this.opts.obstacle.radius>0&&this.drawRadius(t,this.opts.obstacle.radius*this.scale)}return this.ctx.fillStyle=this.opts.stats.color,this.drawText({x:5,y:this.ctx.canvas.height-10},"("+this.offset.x+", "+this.offset.y+")"),this.drawText({x:this.ctx.canvas.width-80,y:this.ctx.canvas.height-10},"Polaris v0.0.1"),performance.now()-s}drawStat(t){this.ctx.fillStyle=this.opts.stats.color,this.drawText({x:this.stats.x,y:this.stats.y},t),this.stats.x+=this.opts.stats.dx,this.stats.y+=this.opts.stats.dy}}}]);